apiVersion: v1
kind: ConfigMap
metadata:
    name: {{ include "statushawk.fullname" . }}-config
    labels:
        {{- include "statushawk.labels" . | nindent 4 }}
data:
    USE_DOCKER: {{ .Values.env.USE_DOCKER | quote }}
    DJANGO_SETTINGS_MODULE: {{ .Values.env.DJANGO_SETTINGS_MODULE | quote }}

    {{- if .Values.postgresql.enabled }}
    DB_HOST: "{{ .Release.Name }}-postgresql"
    DB_PORT: "5432"
    DB_NAME: "statushawk"
    DB_USER: "postgres"
    {{- end }}

    {{- if .Values.redis.enabled }}
    # Redis URL format: redis://HOST:PORT/0
    CELERY_BROKER_URL: "redis://{{ .Release.Name }}-redis-master:6379/0"
    {{- end }}
